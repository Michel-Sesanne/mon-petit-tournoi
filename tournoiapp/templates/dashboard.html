{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<h1>Bienvenue, {{ pseudo }} !</h1>

<h2>Vos tournois</h2>
<ul>
  {% for tournoi in tournois %}
    <li>Tournoi #{{ tournoi.id }} - {{ tournoi.nom or "Titre √† d√©finir" }}</li>
  {% else %}
    <li>Aucun tournoi cr√©√©.</li>
  {% endfor %}
</ul>

<h2>Vos joueurs</h2>
<button id="btn-ajouter-joueur">+ Ajouter un joueur</button>

{% set niveaux = {1:"D√©butant",2:"Amateur",3:"Semi-pro",4:"Pro",5:"Expert",6:"L√©gende"} %}

<ul id="dashboard">
  {% for joueur in joueurs %}
    <li data-id="{{ joueur.id }}">
      {{ joueur.nom }} 
      <span class="badge badge-{{ joueur.niveau }}">
        {{ niveaux[joueur.niveau] }}
      </span>
      <button class="btn-modifier" title="Modifier">‚úèÔ∏è</button>
      <button class="btn-supprimer" title="Supprimer">üóëÔ∏è</button>
    </li>
  {% else %}
    <li>Aucun joueur enregistr√©.</li>
  {% endfor %}
</ul>

<a href="{{ url_for('main.logout') }}">Se d√©connecter</a>

<!-- ===========================
     MODALE AJOUTER JOUEUR
     =========================== -->
<div id="modal-ajout-joueur" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Ajouter un joueur</h2>
    <form id="form-ajout-joueur">
      <input type="text" name="nom" placeholder="Nom du joueur" required />
      <label>Niveau :</label>
      <select name="niveau" required>
        <option value="1">D√©butant</option>
        <option value="2">Amateur</option>
        <option value="3">Semi-pro</option>
        <option value="4">Pro</option>
        <option value="5">Expert</option>
        <option value="6">L√©gende</option>
      </select>
      <button type="submit">Ajouter</button>
    </form>
  </div>
</div>

<!-- ===========================
     MODALE MODIFIER JOUEUR
     =========================== -->
<div id="modal-modifier-joueur" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Modifier le joueur</h2>
    <form id="form-modifier-joueur">
      <input type="hidden" id="modifier-joueur-id" name="id">
      <label>Nom :</label>
      <input type="text" id="modifier-nom" name="nom" required>
      <label>Niveau :</label>
      <select id="modifier-niveau" name="niveau" required>
        <option value="1">D√©butant</option>
        <option value="2">Amateur</option>
        <option value="3">Semi-pro</option>
        <option value="4">Pro</option>
        <option value="5">Expert</option>
        <option value="6">L√©gende</option>
      </select>
      <button type="submit">Enregistrer</button>
    </form>
  </div>
</div>

{% endblock %}
